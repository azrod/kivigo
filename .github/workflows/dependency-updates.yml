name: Dependency Update Tests

on:
  pull_request:
    types: [opened, synchronize, reopened]
    paths:
      - 'go.mod'
      - 'go.sum'

jobs:
  lint:
    name: ðŸ§¹ Run Go Lint
    uses: ./.github/workflows/go-lint.yml

  test:
    name: ðŸ§ª Run Go Tests
    uses: ./.github/workflows/go-test.yml

  dependency-update-summary:
    name: ðŸ“Š Dependency update test summary
    runs-on: ubuntu-latest
    needs: [lint, test]
    steps:
      - name: ðŸ“Š Dependency update test summary
        run: |
          echo "## ðŸ“‹ Dependency Update Test Summary" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "âœ… Lint result: ${{ needs.lint.result }}" >> $GITHUB_STEP_SUMMARY
          echo "âœ… Test result: ${{ needs.test.result }}" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "ðŸŽ‰ Dependency update validation complete!"